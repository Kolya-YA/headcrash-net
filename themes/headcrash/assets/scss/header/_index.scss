@use "skip-to-content";
@use "nav-toggler";
@use "header-logo";

.header {
    @media (min-width: 70em) {
        --toggler-display: none;
        // --nav-visibility: visible;
        --desktop-border: none;
        --desktop-margin: none;
        --desktop-padding: none;
        --desktop-transform: none;
        --desktop-size: auto;
        --desktop-ul-display: flex;
        --desktop-position: static;
    }

    position: relative;
    background-color: var(--dark-bg-color);

    &__block {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding-block: calc(var(--main-gap) / 2);
                
        .header__nav {
            display: flex;
            flex-direction: column;
            // visibility: var(--nav-visibility, hidden);
            // position: var(--desktop-position, fixed);
            position: var(--desktop-position, absolute);
            transform: var(--desktop-transform, translateX(100%));
            transition: var(--desktop-transform, (transform 0.6s cubic-bezier(0.68, -0.55, 0.27, 1.55), visibility 0.3s linear));
            top: 100%;
            // bottom: 0;
            right: 0;
            z-index: 10;
            width: var(--desktop-size, calc(min(22rem, 100vw)));
            min-height: var(--desktop-size, 100vh);
            padding: var(--desktop-padding, 0.6rem);
            color: var(--light-bg-color);
            background-color: var(--desktop-border, var(--light-text-color));
            background-color: var(--dark-bg-color);
            box-shadow: var(--desktop-border, var(--nav-list-shadow, -5px 0 11px 0 #00000046));
        
            &-list {
                display: var(--desktop-ul-display, block);
                margin: var(--desktop-margin, 1rem 0 0);
                border-top: var(--desktop-border, 2px solid var(--btn-grey));
                padding: 0;
                list-style: none;
            }
        
            &-item > a {
                text-decoration: none;
                display: block;
                padding: 0.6em;
                color: inherit;
                border-bottom: 4px solid transparent;
                transition: border-color 600ms ease, color 300ms ease;
                
                &:is(:hover, :focus-visible) {
                    color: var(--link-color);
                }
                
            }

            &-item--has-children {
                position: relative;

                .header__nav-sublist {
                    position: absolute;
                    z-index: 99;
                    right: 0;
                    top: calc(100% - 4px);
                    width: max-content;
                    padding-block: var(--main-gap);
                    padding-inline: calc(var(--main-gap) * 2);
                    list-style: none;
                    background-color: var(--light-bg-color);
                    background-color: var(--dark-bg-color);
                    border-bottom-left-radius: var(--border-radius);
                    border-bottom-right-radius: var(--border-radius);
                    box-shadow: var(--box-shadow);
                    pointer-events: none;
                    opacity: 0;

                    & a {
                        color: inherit;
                        text-decoration: none;
                        line-height: 1.8;
                        transition: color 300ms ease-in-out;

                        &:is(:hover, :focus-visible) {
                            color: var(--link-color);
                        }
                    }

                    &:is(:hover, :focus-within) {
                        pointer-events: all;
                        opacity: 1;
                    }
                } 
                
                & > a::before {
                    content: "\25b8";
                    display: inline-block;
                    margin-inline-end: 8px;
                    transition: transform 300ms ease-in-out;
                }
                
                & > a {

                    &:is(:hover, :focus-visible) {
                        
                        &::before {
                            transform: rotate(90deg);
                        }

                        & + .header__nav-sublist {
                            pointer-events: all;
                            opacity: 1;
                            transform: translateY(0);
                        }
                    }
                }                
            }


            
            &-item--active > a {
                color: var(--link-color-light);
                border-color: var(--link-color-light);
            }

            &.header__nav--open {
            // &.header__nav {
                visibility: visible;
                transform: none;
            }
        }
    }
}